"use strict";(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[6986],{9365:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(6540),a=r(53);const o={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:r,className:s}=e;return n.createElement("div",{role:"tabpanel",className:(0,a.A)(o.tabItem,s),hidden:r},t)}},1470:(e,t,r)=>{r.d(t,{A:()=>k});var n=r(8168),a=r(6540),o=r(53),s=r(3104),i=r(6347),l=r(7485),c=r(1682),u=r(9466);function p(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:r,attributes:n,default:a}}=e;return{value:t,label:r,attributes:n,default:a}}))}function h(e){const{values:t,children:r}=e;return(0,a.useMemo)((()=>{const e=t??p(r);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function d(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:r}=e;const n=(0,i.W6)(),o=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,l.aZ)(o),(0,a.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function g(e){const{defaultValue:t,queryString:r=!1,groupId:n}=e,o=h(e),[s,i]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=r.find((e=>e.default))??r[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:o}))),[l,c]=m({queryString:r,groupId:n}),[p,g]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,o]=(0,u.Dv)(r);return[n,(0,a.useCallback)((e=>{r&&o.set(e)}),[r,o])]}({groupId:n}),y=(()=>{const e=l??p;return d({value:e,tabValues:o})?e:null})();(0,a.useLayoutEffect)((()=>{y&&i(y)}),[y]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),g(e)}),[c,g,o]),tabValues:o}}var y=r(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:r,selectedValue:i,selectValue:l,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,s.a_)(),h=e=>{const t=e.currentTarget,r=u.indexOf(t),n=c[r].value;n!==i&&(p(t),l(n))},d=e=>{let t=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const r=u.indexOf(e.currentTarget)+1;t=u[r]??u[0];break}case"ArrowLeft":{const r=u.indexOf(e.currentTarget)-1;t=u[r]??u[u.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":r},t)},c.map((e=>{let{value:t,label:r,attributes:s}=e;return a.createElement("li",(0,n.A)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>u.push(e),onKeyDown:d,onClick:h},s,{className:(0,o.A)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":i===t})}),r??t)})))}function v(e){let{lazy:t,children:r,selectedValue:n}=e;const o=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===n));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function w(e){const t=g(e);return a.createElement("div",{className:(0,o.A)("tabs-container",f.tabList)},a.createElement(b,(0,n.A)({},e,t)),a.createElement(v,(0,n.A)({},e,t)))}function k(e){const t=(0,y.A)();return a.createElement(w,(0,n.A)({key:String(t)},e))}},1441:(e,t,r)=>{r(6540)},5347:(e,t,r)=>{r.d(t,{r:()=>i});var n=r(1470),a=r(9365),o=r(2355),s=r(6540);const i=e=>{let{js:t,python:r,java:i,kotlin:l,go:c,csharp:u,php:p,rust:h,ruby:d,elixir:m,swift:g,dart:y,cli:f}=e;return t||r||i||l||c||u||p||h||d||m||g||y||f?s.createElement(n.A,null,t&&s.createElement(a.A,{value:"js",label:"JavaScript"},s.createElement(o.A,{language:"js"},t)),r&&s.createElement(a.A,{value:"python",label:"Python"},s.createElement(o.A,{language:"python"},r)),i&&s.createElement(a.A,{value:"java",label:"Java"},s.createElement(o.A,{language:"java"},i)),l&&s.createElement(a.A,{value:"kotlin",label:"Kotlin"},s.createElement(o.A,{language:"kotlin"},l)),c&&s.createElement(a.A,{value:"go",label:"Go"},s.createElement(o.A,{language:"go"},c)),u&&s.createElement(a.A,{value:"csharp",label:"C#"},s.createElement(o.A,{language:"csharp"},u)),p&&s.createElement(a.A,{value:"php",label:"PHP"},s.createElement(o.A,{language:"php"},p)),h&&s.createElement(a.A,{value:"rust",label:"Rust"},s.createElement(o.A,{language:"rust"},h)),d&&s.createElement(a.A,{value:"ruby",label:"Ruby"},s.createElement(o.A,{language:"ruby"},d)),m&&s.createElement(a.A,{value:"elixir",label:"Elixir"},s.createElement(o.A,{language:"elixir"},m)),g&&s.createElement(a.A,{value:"swift",label:"Swift"},s.createElement(o.A,{language:"swift"},g)),y&&s.createElement(a.A,{value:"dart",label:"Dart"},s.createElement(o.A,{language:"dart"},y)),f&&s.createElement(a.A,{value:"cli",label:"CLI"},s.createElement(o.A,{language:"cli"},f))):null}},3668:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var n=r(8168),a=(r(6540),r(5680)),o=(r(1441),r(5347));const s={sidebar_position:20,sidebar_label:"SDK Error Handling",title:"SDK error handling",description:"Discover how to handle errors when using the Momento SDK.",pagination_next:null},i="SDK Error Handling",l={unversionedId:"cache/develop/basics/error-handling-production-readiness",id:"cache/develop/basics/error-handling-production-readiness",title:"SDK error handling",description:"Discover how to handle errors when using the Momento SDK.",source:"@site/docs/cache/develop/basics/error-handling-production-readiness.md",sourceDirName:"cache/develop/basics",slug:"/cache/develop/basics/error-handling-production-readiness",permalink:"/cache/develop/basics/error-handling-production-readiness",draft:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/cache/develop/basics/error-handling-production-readiness.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{sidebar_position:20,sidebar_label:"SDK Error Handling",title:"SDK error handling",description:"Discover how to handle errors when using the Momento SDK.",pagination_next:null},sidebar:"tutorialSidebar",previous:{title:"SDK Configuration Objects",permalink:"/cache/develop/basics/client-configuration-objects"}},c={},u=[{value:"Surfacing errors",id:"surfacing-errors",level:2},{value:"Retrying calls that returned an error",id:"retrying-calls-that-returned-an-error",level:2}],p={toc:u},h="wrapper";function d(e){let{components:t,...r}=e;return(0,a.yg)(h,(0,n.A)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"sdk-error-handling"},"SDK Error Handling"),(0,a.yg)("p",null,"Each of our SDKs has its own page in this documentation; you can navigate to them by clicking ",(0,a.yg)("inlineCode",{parentName:"p"},"Develop"),"->",(0,a.yg)("inlineCode",{parentName:"p"},"SDKs"),' in the left navigation menu. On each of these pages, you\'ll find a link for "Taking your code to prod" which provides best practices for production-ready code in that language.'),(0,a.yg)("p",null,"Momento SDKs are designed to behave well in production environments using the pre-built configuration objects provided, so most users can easily move from proof of concept to production with no changes in operating practices. This page shares some general notes on error handling in Momento SDKs, and why the default behaviors we've chosen are recommended for most customers."),(0,a.yg)("h2",{id:"surfacing-errors"},"Surfacing errors"),(0,a.yg)("p",null,"Errors that occur in calls to ",(0,a.yg)("inlineCode",{parentName:"p"},"CacheClient")," methods (e.g. Get, Set, Increment) are surfaced to developers as part of the return values of the calls, as opposed to throwing exceptions. This makes errors more visible when you're writing your code, and allows your IDE to be more helpful in ensuring you've handled the errors you care about. For more on our philosophy about this, see our blog post on why ",(0,a.yg)("a",{parentName:"p",href:"https://www.gomomento.com/blog/exceptions-are-bugs"},"Exceptions are bugs"),", and send us any feedback you have!"),(0,a.yg)("p",null,"This also helps to ensure your application doesn't crash at runtime. Momento is a cache, so applications usually have an authoritative data source they from which they retrieve data if the cache is unavailable. Therefore, Momento SDKs are designed to avoid throwing exceptions so your app won't crash if you forget to add a try/catch block."),(0,a.yg)("p",null,"Instead, Momento response objects extend from a parent class, have child types such as ",(0,a.yg)("inlineCode",{parentName:"p"},"Hit,")," ",(0,a.yg)("inlineCode",{parentName:"p"},"Miss,")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"Error,"),' and are designed to be accessed via pattern matching. (In some languages, this concept is called "sealed classes"; in others, "algebraic data types". It is a flavor of polymorphism.) Your code checks whether the response is a ',(0,a.yg)("inlineCode",{parentName:"p"},"Hit,")," a ",(0,a.yg)("inlineCode",{parentName:"p"},"Miss,")," or an ",(0,a.yg)("inlineCode",{parentName:"p"},"Error"),", and then branches accordingly. Using this approach, you get a type-safe response object in the case of a cache hit, with ",(0,a.yg)("inlineCode",{parentName:"p"},"value")," properties that you can be assured at compile-time are not ",(0,a.yg)("inlineCode",{parentName:"p"},"null.")," If the cache read results in a ",(0,a.yg)("inlineCode",{parentName:"p"},"Miss")," or an ",(0,a.yg)("inlineCode",{parentName:"p"},"Error,")," you'll also get a type-safe object that you can use to get more information about what happened (with properties such as ",(0,a.yg)("inlineCode",{parentName:"p"},"errorCode")," that aren't present on a ",(0,a.yg)("inlineCode",{parentName:"p"},"Hit")," object)."),(0,a.yg)("p",null,"Here's an example of how to do the pattern matching on a ",(0,a.yg)("inlineCode",{parentName:"p"},"Hit"),"/",(0,a.yg)("inlineCode",{parentName:"p"},"Miss"),"/",(0,a.yg)("inlineCode",{parentName:"p"},"Error")," response:"),(0,a.yg)(o.r,{js:"const result = await cacheClient.get(cacheName, 'test-key');\nif (result instanceof CacheGet.Hit) {\n  console.log(`Retrieved value for key 'test-key': ${result.valueString()}`);\n} else if (result instanceof CacheGet.Miss) {\n  console.log(`Key 'test-key' was not found in cache '${cacheName}'`);\n} else if (result instanceof CacheGet.Error) {\n  throw new Error(\n    `An error occurred while attempting to get key 'test-key' from cache '${cacheName}': ${result.errorCode()}: ${result.toString()}`\n  );\n}",python:"",java:"final GetResponse response = cacheClient.get(\"test-cache\", \"test-key\").join();\nif (response instanceof GetResponse.Hit hit) {\n  System.out.println(\"Retrieved value for key 'test-key': \" + hit.valueString());\n} else if (response instanceof GetResponse.Miss) {\n  System.out.println(\"Key 'test-key' was not found in cache 'test-cache'\");\n} else if (response instanceof GetResponse.Error error) {\n  throw new RuntimeException(\n      \"An error occurred while attempting to get key 'test-key' from cache 'test-cache': \"\n          + error.getErrorCode(),\n      error);\n}",kotlin:"when (val response = cacheClient.get(\"test-cache\", \"test-key\")) {\n    is GetResponse.Hit -> println(\"Retrieved value for key 'test-key': ${response.value}\")\n    is GetResponse.Miss -> println(\"Key 'test-key' was not found in cache 'test-cache'\")\n    is GetResponse.Error -> throw RuntimeException(\n        \"An error occurred while attempting to get key 'test-key' from cache 'test-cache': ${response.errorCode}\",\n        response\n    )\n}",go:"",csharp:"",php:"",rust:"",ruby:"",elixir:"case Momento.CacheClient.get(client, \"test-cache\", \"test-key\") do\n  {:ok, hit} ->\n    IO.puts(\"Retrieved value for key 'test-key': #{hit.value}\")\n\n  :miss ->\n    IO.puts(\"Key 'test-key' was not found in cache 'test-cache'\")\n\n  {:error, error} ->\n    IO.puts(\n      \"An error occurred while attempting to get key 'test-key' from cache 'test-cache': #{error.error_code}\"\n    )\n\n    raise error\nend",swift:"",dart:"",cli:"",mdxType:"SdkExampleTabsImpl"}),(0,a.yg)("p",null,"Some APIs, such as write APIs (e.g. Set, Delete) only have ",(0,a.yg)("inlineCode",{parentName:"p"},"Success")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"Error")," responses (as opposed to ",(0,a.yg)("inlineCode",{parentName:"p"},"Hit"),"/",(0,a.yg)("inlineCode",{parentName:"p"},"Miss"),"). Here's an example of handling one of these responses:"),(0,a.yg)(o.r,{js:"const result = await cacheClient.set(cacheName, 'test-key', 'test-value');\nif (result instanceof CacheSet.Success) {\n  console.log(\"Key 'test-key' stored successfully\");\n} else if (result instanceof CacheSet.Error) {\n  throw new Error(\n    `An error occurred while attempting to store key 'test-key' in cache '${cacheName}': ${result.errorCode()}: ${result.toString()}`\n  );\n}",python:"",java:'final SetResponse response = cacheClient.set("test-cache", "test-key", "test-value").join();\nif (response instanceof SetResponse.Success) {\n  System.out.println("Key \'test-key\' stored successfully");\n} else if (response instanceof SetResponse.Error error) {\n  throw new RuntimeException(\n      "An error occurred while attempting to store key \'test-key\' in cache \'test-cache\': "\n          + error.getErrorCode(),\n      error);\n}',kotlin:'when (val response = cacheClient.set("test-cache", "test-key", "test-value")) {\n    is SetResponse.Success -> println("Key \'test-key\' stored successfully")\n    is SetResponse.Error -> throw RuntimeException(\n        "An error occurred while attempting to store key \'test-key\' in cache \'test-cache\': ${response.errorCode}",\n        response\n    )\n}',go:"",csharp:"",php:"",rust:"",ruby:"",elixir:'case Momento.CacheClient.set(client, "test-cache", "test-key", "test-value") do\n  {:ok, _} ->\n    IO.puts("Key \'test-key\' stored successfully")\n\n  {:error, error} ->\n    IO.puts(\n      "An error occurred while attempting to store key \'test-key\' in cache \'test-cache\': #{error.error_code}"\n    )\n\n    raise error\nend',swift:"",dart:"",cli:"",mdxType:"SdkExampleTabsImpl"}),(0,a.yg)("p",null,"In all cases, your IDE will be able to give you hints as to which types of responses are available for a given API, and what properties/methods are available on each of the response types."),(0,a.yg)("p",null,"For an example of how the error response works and how to use it, watch this video:"),(0,a.yg)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/h9FiNCxlZso",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,a.yg)("h2",{id:"retrying-calls-that-returned-an-error"},"Retrying calls that returned an error"),(0,a.yg)("p",null,"The general pattern of behavior you can expect from Momento SDKs when it comes to retrying a call after an error response is as follows:"),(0,a.yg)("img",{src:"/img/sdk_retry_behavior.png",width:"100%",alt:"logic diagram depicting SDK retry behavior"}),(0,a.yg)("p",null,"Momento SDKs do not retry throttled requests (",(0,a.yg)("a",{parentName:"p",href:"./../../limits/"},"limits exceeded"),"). For other errors, the SDK will not retry if the operation requested is not ",(0,a.yg)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Idempotence"},"idempotent"),". For example, if you are incrementing a counter and receive an error response, the SDK will not retry on your behalf (because this could result in over-counting). In the case of non-idempotent operations, it is safer to let the developer choose whether to retry."))}d.isMDXComponent=!0}}]);