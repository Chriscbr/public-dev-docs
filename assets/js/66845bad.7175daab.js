"use strict";(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[1789],{5680:(e,n,r)=>{r.d(n,{xA:()=>c,yg:()=>u});var t=r(6540);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var d=t.createContext({}),l=function(e){var n=t.useContext(d),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},c=function(e){var n=l(e.components);return t.createElement(d.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},b=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,d=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=l(r),b=a,u=p["".concat(d,".").concat(b)]||p[b]||m[b]||o;return r?t.createElement(u,s(s({ref:n},c),{},{components:r})):t.createElement(u,s({ref:n},c))}));function u(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=b;var i={};for(var d in n)hasOwnProperty.call(n,d)&&(i[d]=n[d]);i.originalType=e,i[p]="string"==typeof e?e:a,s[1]=i;for(var l=2;l<o;l++)s[l]=r[l];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}b.displayName="MDXCreateElement"},6475:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var t=r(8168),a=(r(6540),r(5680));const o={sidebar_position:1,title:"Mapping leaderboard IDs to strings",sidebar_label:"Mapping leaderboard IDs to strings",description:"Learn how to map numeric leaderboard IDs to arbitrary strings.",keywords:["momento","leaderboard","gaming","serverless"]},s="How to map numeric leaderboard IDs to arbitrary strings",i={unversionedId:"leaderboards/patterns/map-id-to-string",id:"leaderboards/patterns/map-id-to-string",title:"Mapping leaderboard IDs to strings",description:"Learn how to map numeric leaderboard IDs to arbitrary strings.",source:"@site/docs/leaderboards/patterns/map-id-to-string.md",sourceDirName:"leaderboards/patterns",slug:"/leaderboards/patterns/map-id-to-string",permalink:"/leaderboards/patterns/map-id-to-string",draft:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/leaderboards/patterns/map-id-to-string.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Mapping leaderboard IDs to strings",sidebar_label:"Mapping leaderboard IDs to strings",description:"Learn how to map numeric leaderboard IDs to arbitrary strings.",keywords:["momento","leaderboard","gaming","serverless"]},sidebar:"leaderboardSidebar",previous:{title:"Patterns"},next:{title:"Quotas and Limits",permalink:"/leaderboards/limits"}},d={},l=[],c={toc:l},p="wrapper";function m(e){let{components:n,...r}=e;return(0,a.yg)(p,(0,t.A)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"how-to-map-numeric-leaderboard-ids-to-arbitrary-strings"},"How to map numeric leaderboard IDs to arbitrary strings"),(0,a.yg)("p",null,"Momento Leaderboards elements are uniquely identified by an unsigned 64-bit number that can represent a player identifier, session identifier, browser identifier or any other kind of identifier you want to use. An id can only appear in a leaderboard one time, meaning you can't have two scores for one player unless that player has two ids!"),(0,a.yg)("p",null,"In some cases, you may want to associate that ID with some other information, such as a player's name, for a more human-friendly leaderboard display.\nYou can use a dictionary to convert between the string and ID representations as shown below."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-typescript"},"import {\n  PreviewLeaderboardClient,\n  LeaderboardConfigurations,\n  CredentialProvider,\n  CacheClient,\n  Configurations,\n  CreateCache,\n  LeaderboardDelete,\n  LeaderboardFetch,\n  LeaderboardOrder,\n  LeaderboardUpsert,\n} from '@gomomento/sdk';\n\nasync function main() {\n  // 1. Create a CacheClient to connect to Momento\n  const cacheClient = await CacheClient.create({\n    configuration: Configurations.Laptop.v1(),\n    credentialProvider: CredentialProvider.fromEnvironmentVariable({\n      environmentVariableName: 'MOMENTO_API_KEY',\n    }),\n    defaultTtlSeconds: 60,\n  });\n\n  // 2. Create a cache for the leaderboard to live in\n  const createCacheResponse = await cacheClient.createCache('my-cache');\n  if (createCacheResponse instanceof CreateCache.AlreadyExists) {\n    console.log('cache already exists');\n  } else if (createCacheResponse instanceof CreateCache.Error) {\n    throw createCacheResponse.innerException();\n  }\n\n  // 3. Create a Leaderboard client\n  const client = new PreviewLeaderboardClient({\n    configuration: LeaderboardConfigurations.Laptop.v1(),\n    credentialProvider: CredentialProvider.fromEnvironmentVariable({\n      environmentVariableName: 'MOMENTO_API_KEY',\n    }),\n  });\n\n  // 4. Create a leaderboard with given cache and leaderboard names\n  const leaderboard = client.leaderboard('my-cache', 'my-leaderboard');\n\n  // 5. Create a mapping between element IDs and arbitrary strings\n  const id2name: Record<number, string> = {\n    123: 'Alice',\n    456: 'Bob',\n    789: 'Charlie',\n    1234: 'David',\n    5678: 'Eve',\n  };\n\n  // 6. Upsert the elements along with some scores\n  let upsertElements: Record<number, number> = {}\n  for (const id of Object.keys(id2name)) {\n    upsertElements[Number(id)] = Math.floor(Math.random() * 1000);\n  }\n  const upsertResponse = await leaderboard.upsert(upsertElements);\n  if (upsertResponse instanceof LeaderboardUpsert.Success) {\n    console.log('Upsert success!');\n  } else if (upsertResponse instanceof LeaderboardUpsert.Error) {\n    console.log('Upsert error:', upsertResponse.message());\n  }\n\n  // 7. Fetch the top 5 elements in the leaderboard and print scores and corresponding strings\n  const fetchResponse = await leaderboard.fetchByRank(0, 5, { order: LeaderboardOrder.Descending });\n  if (fetchResponse instanceof LeaderboardFetch.Success) {\n    const elements = fetchResponse.values();\n    console.log('------------Top 5 Leaderboard-------------');\n    console.log('------------------------------------------');\n    for (const element of elements) {\n      console.log(`${id2name[element.id]}: ${element.score}`);\n    }\n    console.log('------------------------------------------');\n  } else if (fetchResponse instanceof LeaderboardFetch.Error) {\n    console.log('Fetch error:', fetchResponse.message());\n  }\n\n  // 8. Delete the entire leaderboard when done.\n  // Leaderboard items have a default 7-day TTL so make sure to clean up\n  // all unnecessary elements when no longer needed.\n  const deleteResp = await leaderboard.delete();\n  if (deleteResp instanceof LeaderboardDelete.Success) {\n    console.log('Delete leaderboard success');\n  } else if (deleteResp instanceof LeaderboardDelete.Error) {\n    console.log('Delete leaderboard error:', deleteResp.message());\n  }\n}\n\nmain()\n  .then(() => {\n    console.log('Leaderboard example completed!');\n    exit();\n  })\n  .catch((e: Error) => {\n    console.error(`Uncaught exception while running example: ${e.message}`);\n    throw e;\n  });\n")),(0,a.yg)("p",null,"When the example runs, you'll see a leaderboard printed out like this:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},"------------Top 5 Leaderboard-------------\n------------------------------------------\nBob: 772\nCharlie: 685\nDavid: 483\nAlice: 450\nEve: 13\n------------------------------------------\n")))}m.isMDXComponent=!0}}]);