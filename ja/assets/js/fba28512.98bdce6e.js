"use strict";(self.webpackChunkmomento_docs=self.webpackChunkmomento_docs||[]).push([[7364],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},h="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(n),d=i,u=h["".concat(l,".").concat(d)]||h[d]||m[d]||a;return n?o.createElement(u,r(r({ref:t},p),{},{components:n})):o.createElement(u,r({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:i,r[1]=s;for(var c=2;c<a;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2111:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var o=n(7462),i=(n(7294),n(3905));const a={sidebar_position:8,sidebar_label:"Unity",title:"Integrating Momento with your Unity app",description:"Learn to deploy a chat app using Momento .NET SDK to Unity."},r=void 0,s={unversionedId:"cache/develop/integrations/unity-integration",id:"cache/develop/integrations/unity-integration",title:"Integrating Momento with your Unity app",description:"Learn to deploy a chat app using Momento .NET SDK to Unity.",source:"@site/docs/cache/develop/integrations/unity-integration.md",sourceDirName:"cache/develop/integrations",slug:"/cache/develop/integrations/unity-integration",permalink:"/ja/cache/develop/integrations/unity-integration",draft:!1,editUrl:"https://github.com/momentohq/public-dev-docs/tree/main/docs/cache/develop/integrations/unity-integration.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,sidebar_label:"Unity",title:"Integrating Momento with your Unity app",description:"Learn to deploy a chat app using Momento .NET SDK to Unity."},sidebar:"tutorialSidebar",previous:{title:"Cloudflare",permalink:"/ja/cache/develop/integrations/cloudflare"},next:{title:"Fastly",permalink:"/ja/cache/develop/integrations/fastly"}},l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Unity",id:"unity",level:3},{value:"Momento",id:"momento",level:3},{value:"Setting up the Unity Project",id:"setting-up-the-unity-project",level:2},{value:"Creating the Project",id:"creating-the-project",level:3},{value:"Adding the Momento .NET SDK to Unity",id:"adding-the-momento-net-sdk-to-unity",level:3},{value:"Building the Unity Chat Application with Momento Topics",id:"building-the-unity-chat-application-with-momento-topics",level:2},{value:"Understanding the User Interface",id:"understanding-the-user-interface",level:3},{value:"Understanding the C# script that subscribes to the Momento Topic",id:"understanding-the-c-script-that-subscribes-to-the-momento-topic",level:3},{value:"Conclusion",id:"conclusion",level:2}],p={toc:c},h="wrapper";function m(e){let{components:t,...a}=e;return(0,i.kt)(h,(0,o.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://unity.com/"},"Unity")," is a real-time development platform that is one of the most popular game engines on the market today. The Unity game engine is used by thousands of developers to create 2D and 3D interactive apps, across a variety of platforms, including mobile, desktop, and immersive platforms (e.g., augmented and virtual reality)."),(0,i.kt)("p",null,"In this tutorial, we'll build a ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/momentohq/momento-unity-demo"},"simple Unity chat application")," using the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/momentohq/client-sdk-dotnet"},"Momento .NET SDK"),". Specifically, we'll utilize ",(0,i.kt)("a",{parentName:"p",href:"https://docs.momentohq.com/topics"},"Momento Topics")," for publishing and subscribing to the chat messages. "),(0,i.kt)("p",null,"Momento Topics is a serverless approach to real-time communication that allows clients to subscribe and publish to dedicated channels called topics. This makes it perfect for a real-time Unity-based chat application. Furthermore, since it's a serverless approach, there's no need for you to worry about all the details of creating or configuring your own server. More details can be found on the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.momentohq.com/topics"},"Momento Topics Documentation page"),"."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("h3",{id:"unity"},"Unity"),(0,i.kt)("p",null,"Download the ",(0,i.kt)("a",{parentName:"p",href:"https://unity.com/releases/lts"},"Unity 2022 LTS release"),". In writing this tutorial, we specifically used Unity 2022.3.9f1 but any Unity 2022 LTS release should work."),(0,i.kt)("h3",{id:"momento"},"Momento"),(0,i.kt)("p",null,"While waiting for Unity to download and install, you can configure the Momento side of things using the ",(0,i.kt)("a",{parentName:"p",href:"https://console.gomomento.com"},"Momento console"),". "),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"You can create an account in the console by providing your email address or linking an existing Google or GitHub account. ")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Once you've logged into the console, click the ",(0,i.kt)("inlineCode",{parentName:"p"},"Create Cache")," button on the top right of the page:\n",(0,i.kt)("img",{alt:"Create Cache button",src:n(6923).Z,width:"336",height:"258"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Create a cache called ",(0,i.kt)("inlineCode",{parentName:"p"},"Unity-Topics-Cache"),". You can create the cache in your choice of cloud provider, AWS or GCP, and in any region.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"After pressing the ",(0,i.kt)("inlineCode",{parentName:"p"},"Create")," button you'll see the new ",(0,i.kt)("inlineCode",{parentName:"p"},"Unity-Topics-Cache")," cache in the list of available caches. Notice the region you created your cache in is also displayed in the list of caches. You'll need to make sure that you choose the same region when you generate a Momento authentication token in the next step.\n",(0,i.kt)("img",{alt:"Chat cache",src:n(4108).Z,width:"1173",height:"428"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Navigate to the ",(0,i.kt)("a",{parentName:"p",href:"https://console.gomomento.com/tokens"},"tokens")," page, choose the cloud provider and region you used to create your cache, choose the ",(0,i.kt)("inlineCode",{parentName:"p"},"Super User Token")," token type, and hit the ",(0,i.kt)("inlineCode",{parentName:"p"},"Generate Token")," button.\n",(0,i.kt)("img",{alt:"Generate token",src:n(1204).Z,width:"2984",height:"1600"}))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Copy the ",(0,i.kt)("inlineCode",{parentName:"p"},"Auth Token")," and save it in a safe place. You'll need to use it later to configure your Unity chat application.\n",(0,i.kt)("img",{alt:"Generated token",src:n(3679).Z,width:"2214",height:"374"})))),(0,i.kt)("h2",{id:"setting-up-the-unity-project"},"Setting up the Unity Project"),(0,i.kt)("h3",{id:"creating-the-project"},"Creating the Project"),(0,i.kt)("p",null,"After completing the ",(0,i.kt)("a",{parentName:"p",href:"#prerequisites"},"Prerequisites"),", you'll need to set up the Unity project. To do so, you can either clone our ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/momentohq/momento-unity-demo"},"example demo repository")," and start from there, or you can create your own from scratch. If you're new to Unity or want to save time in later steps, we recommend cloning the example repository. "),(0,i.kt)("p",null,"To use the Unity project in our example repository, complete the following steps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Clone ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/momentohq/momento-unity-demo"},"https://github.com/momentohq/momento-unity-demo"),"."),(0,i.kt)("li",{parentName:"ol"},"Open Unity Hub."),(0,i.kt)("li",{parentName:"ol"},'Open the existing Unity project by clicking "Open":\n',(0,i.kt)("img",{alt:"New Unity Project",src:n(3019).Z,width:"1280",height:"760"})),(0,i.kt)("li",{parentName:"ol"},"Then choose the cloned folder."),(0,i.kt)("li",{parentName:"ol"},"If using a version other than Unity 2022.3.9f1, you may need to let Unity change the project's editor version appropriately."),(0,i.kt)("li",{parentName:"ol"},"Once the Unity project is loaded, open the ",(0,i.kt)("inlineCode",{parentName:"li"},"Scenes/MomentTopicsDemo.unity")," scene file.")),(0,i.kt)("p",null,"The rest of this tutorial will utilize our example repository."),(0,i.kt)("h3",{id:"adding-the-momento-net-sdk-to-unity"},"Adding the Momento .NET SDK to Unity"),(0,i.kt)("p",null,"Once the project has finished being opened:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Download the latest ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/momentohq/client-sdk-dotnet/releases"},"MomentoSdkUnity release .zip file"),". For example, for the ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/momentohq/client-sdk-dotnet/releases/tag/v1.23.0"},"v1.23.0 release"),", you would download ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/momentohq/client-sdk-dotnet/releases/download/v1.23.0/MomentoSdkUnity-1.23.0.zip"},"MomentoSdkUnity-1.23.0.zip"),". This .zip file contains a special version of the Momento .NET SDK that utilizes gRPC-Web due to HTTP/2 compatibility limitations in Unity. Required DLL dependencies are also included in the zip. "),(0,i.kt)("li",{parentName:"ol"},"Unzip its contents inside the folder ",(0,i.kt)("inlineCode",{parentName:"li"},"Assets/MomentoSdkUnity"),". ")),(0,i.kt)("h2",{id:"building-the-unity-chat-application-with-momento-topics"},"Building the Unity Chat Application with Momento Topics"),(0,i.kt)("p",null,"Once you get to this step, you are ready to start building the user interface and writing the C# scripts to connect to Momento Topics via the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.momentohq.com/cache/develop/sdks/dotnet"},"Momento .NET SDK"),". "),(0,i.kt)("p",null,"In this tutorial, we'll utilize the already existing example code in the cloned repository and in the following two sections we'll give an overview of how the UI and C# code is setup."),(0,i.kt)("h3",{id:"understanding-the-user-interface"},"Understanding the User Interface"),(0,i.kt)("p",null,"In our example project, the user interface is already built out into two separate ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/UICanvas.html"},"Unity UI Canvas")," elements, one for letting the user choose a name and one for the actual text chat."),(0,i.kt)("p",null,"As shown below, the NameCanvas contains a ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Packages/com.unity.textmeshpro@3.0/"},"TextMeshPro"),' input field and a "Start" button. '),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"NameCanvas",src:n(7634).Z,width:"1602",height:"805"})),(0,i.kt)("p",null,'After the user enters a name, either pressing the Enter key or clicking on the "Start" button will start the chat application. Once that happens, our C# script will hide the NameCanvas and then show the MessagingCanvas. '),(0,i.kt)("p",null,"The MessagingCanvas contains a ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/UIInteractionComponents.html#scroll-rect-scroll-view"},"Scroll View")," that will enable our chat messaging window to be scrollable. With the appropriate ",(0,i.kt)("a",{parentName:"p",href:"https://docs.unity3d.com/Packages/com.unity.ugui@1.0/manual/UIBasicLayout.html"},"positioning of the UI elements"),", we can make the chat messaging area grow upwards, letting the latest messages always show at the bottom."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"MessagingCanvas",src:n(8832).Z,width:"1527",height:"671"})),(0,i.kt)("p",null,"The MessagingCanvas also has an emoji button that allows the user to view available emojis and to add emojis to the chat:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Demo Video",src:n(3827).Z,width:"631",height:"727"})),(0,i.kt)("p",null,"A helper C# script ",(0,i.kt)("inlineCode",{parentName:"p"},"EmojiHelper.cs")," is used to handle the emoji insertion."),(0,i.kt)("h3",{id:"understanding-the-c-script-that-subscribes-to-the-momento-topic"},"Understanding the C# script that subscribes to the Momento Topic"),(0,i.kt)("p",null,"In our example code, the magic happens in ",(0,i.kt)("inlineCode",{parentName:"p"},"Assets/TopicsTest.cs"),", which is based upon the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/momentohq/client-sdk-dotnet/tree/main/examples/TopicExample"},"Momento .NET SDK Topic Example"),"."),(0,i.kt)("p",null,"The first thing we need to do is to let our C# script know about the auth token we created above in the ",(0,i.kt)("a",{parentName:"p",href:"#momento"},"Momento Prerequisite")," step. Following the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/momentohq/client-sdk-dotnet/tree/main/examples/TopicExample"},"Momento .NET SDK Topic Example"),", we can either grab the auth token from an environment variable or by hard-coding it in our code (note that hard-coding your auth token in code is NOT recommended but can be used for testing purposes, if necessary):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'To set the environment variable in Windows, click the Windows Start button, search for "environment" and click on "Edit the system environment variables." Then click on "Environment Variables" and ensure the ',(0,i.kt)("inlineCode",{parentName:"li"},"MOMENTO_AUTH_TOKEN")," environment variable is set. You may need to restart Unity to get it to recognize your newly created environment variable."),(0,i.kt)("li",{parentName:"ul"},"To hard-code the auth token in C# script, copy and paste your auth token into ",(0,i.kt)("inlineCode",{parentName:"li"},"Assets/TopicsTest.cs")," replacing ",(0,i.kt)("inlineCode",{parentName:"li"},"ADD_YOUR_TOKEN_HERE")," in the ",(0,i.kt)("inlineCode",{parentName:"li"},"ReadAuthToken()")," function.")),(0,i.kt)("p",null,'After the auth token is appropriately set, you can go ahead and click on the "Play" button in the Unity Editor to test it out! '),(0,i.kt)("h2",{id:"conclusion"},"Conclusion"),(0,i.kt)("p",null,"In conclusion, to integrate Momento with Unity is as simple as downloading the latest ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/momentohq/client-sdk-dotnet/releases"},"MomentoSdkUnity release .zip file")," and unzipping it anywhere within your Unity ",(0,i.kt)("inlineCode",{parentName:"p"},"Assets")," folder. In this tutorial, we took it a step further and demonstrated how to set up a simple chat user interface that connects to a Momento Topic for easy publishing of messages and subscribing to messages."))}m.isMDXComponent=!0},6923:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/console-create-cache-90d89709336a49153da1d5b47282742a.png"},1204:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/console-generate-token-form-b4b496c107969c7c2003c01edb6e6121.png"},3679:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/console-generate-token-result-b2c8d5c02290b410501cb50bfe27e02b.png"},8832:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/MessagingCanvas-c60f1068e03375c5407c153c02b78a6a.png"},7634:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/NameCanvas-02005d290024a8436b742a8701c10056.png"},4108:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/Unity-Topics-Cache-a2d727138074b13e28cae8e3de98a042.png"},3827:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/emojis-25fb0a70eeb90fb72bf829e91d0d2345.png"},3019:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/hub-new-project-4677003da342342d687c2cb5057a0373.png"}}]);